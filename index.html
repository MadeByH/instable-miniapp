<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>اکسپلور — اینستا بله</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar"><h1>اینستا بله | اکسپلور</h1></header>
  <main>
    <div id="grid" class="grid"></div>
    <div id="loading" class="loading">در حال بارگزاری...</div>
  </main>

<script src="app.js"></script>
<script>
  window.API_BASE = "https://insta-api-avn2.onrender.com/api";
  window.initExplore();
</script>
<div id="nav"></div>

<script>
fetch("nav.html")
  .then(r => r.text())
  .then(html => {
    const navContainer = document.getElementById("nav");
    navContainer.innerHTML = html;

    // ----------------------------------------------------
    //  کد جایگزین شده در اینجا قرار می‌گیرد
    // ----------------------------------------------------
    try {
      // فرض می‌کنیم getUserId() در app.js تعریف شده و شناسه را برمی‌گرداند
      const uid = getUserId(); 
      const profileLink = document.getElementById("profile-link");

      if(uid){
        profileLink.href = `profile.html?user_id=${uid}`;
      } else {
        // این حالت در try/catch رخ نمی‌دهد مگر اینکه getUserId() مقدار معتبری (مثل undefined/null) برگرداند 
        // اما برای اطمینان از وجود لینک پروفایل، شرط دوم را می‌گذاریم.
        profileLink.onclick = () => alert("شناسه کاربر یافت نشد");
      }

    } catch (error) {
      const profileLink = document.getElementById("profile-link");
      profileLink.onclick = () => alert("شناسه کاربر یافت نشد");
    }
    // ----------------------------------------------------
  });
</script>
</body>
</html>
